<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Manage Cars</title>
</head>
<body>
    <h1>Manage Cars</h1>

    <h2>Add Car</h2>
    <form action="add_car.php" method="POST">
        <label>VIN: <input type="number" name="carVin" required></label><br>
        <label>Make: <input type="text" name="carMake" required></label><br>
        <label>Model: <input type="text" name="carModel" required></label><br>
        <label>Year: <input type="number" name="carYear" required></label><br>
        
        <label>Color:
            <select name="carColor" required>
                <option value="Blue">Blue</option>
                <option value="Red">Red</option>
                <option value="White">White</option>
                <option value="Black">Black</option>
                <option value="Gray">Gray</option>
                <option value="Green">Green</option>
                <option value="Yellow">Yellow</option>
            </select>
        </label><br>
        
        <label>Daily Price: <input type="number" step="0.01" name="carDailyPrice" required></label><br>
        
        <label>Location ID:
            <select name="locationId" required>
                <?php
                include 'db_connection.php'; // Include database connection
                $sql = "SELECT locationId, locationName FROM Locations";
                $result = $conn->query($sql);
                if ($result->num_rows > 0) {
                    while ($row = $result->fetch_assoc()) {
                        echo "<option value='{$row['locationId']}'>{$row['locationId']} - {$row['locationName']}</option>";
                    }
                } else {
                    echo "<option value=''>No Locations Available</option>";
                }
                $conn->close();
                ?>
            </select>
        </label><br>
        
        <button type="submit">Add Car</button>
    </form>

    <h2>Car List</h2>
    <table border="1">
        <tr>
            <th>VIN</th>
            <th>Make</th>
            <th>Model</th>
            <th>Year</th>
            <th>Color</th>
            <th>Daily Price</th>
            <th>Location ID</th>
            <th>Actions</th>
        </tr>
        <?php
        include 'db_connection.php'; // Include database connection
        $sql = "SELECT * FROM Cars";
        $result = $conn->query($sql);
        if ($result->num_rows > 0) {
            while ($row = $result->fetch_assoc()) {
                echo "<tr>
                        <td>{$row['carVin']}</td>
                        <td>{$row['carMake']}</td>
                        <td>{$row['carModel']}</td>
                        <td>{$row['carYear']}</td>
                        <td>{$row['carColor']}</td>
                        <td>{$row['carDailyPrice']}</td>
                        <td>{$row['locationId']}</td>
                        <td>
                            <a href='update_car.php?carVin={$row['carVin']}'>Update</a>
                            <a href='delete_car.php?carVin={$row['carVin']}'>Delete</a>
                        </td>
                    </tr>";
            }
        } else {
            echo "<tr><td colspan='8'>No Cars Found</td></tr>";
        }
        $conn->close();
        ?>
    </table>
</body>
</html>
